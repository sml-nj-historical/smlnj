<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.07 [en] (X11; I; Linux 2.2.7 i686) [Netscape]">
</HEAD>
<BODY bgcolor="#FFFFFF">

<CENTER>
<H1>
<FONT COLOR="#aa0000">Client Defined Pseudo Ops</FONT></H1></CENTER>
<h2> Introduction </h2>

Client defined pseudo ops should satisfy the following signature:
<pre>
signature <a href="../instructions/pseudoOps.sig" target=code>PSEUDO_OPS</a> = sig
  type pseudo_op
  val toString : pseudo_op -> string
  val emitValue : {pOp:pseudo_op, loc:int, emit:Word8.word -> unit} -> unit
  val sizeOf : pseudo_op * int -> int
  val adjustLabels : pseudo_op * int -> bool
end
</pre>

The methods that need to be implemented are:
<ul>
 <li> <tt>toString</tt> -- assembly pretty printing
</ul>

When machine code generation is used, we also have to implement
the following methods:
<ul>
 <li> <tt>emitValue</tt> --
    emit value of pseudo op give current location counter and output
    stream. The value emitted should respect the endianness of the
    target machine.
 <li> <tt>sizeOf</tt> --
    Size of the pseudo_op in bytes given the current location counter
    The location counter is provided in case some pseudo ops are 
    dependent on alignment considerations.
 <li> <tt>adjustLabels</tt> --
    adjust the value of labels in the pseudo_op given the current
    location counter.
</ul>

<HR>
    <FONT SIZE="-2">
<ADDRESS>
<A HREF="mailto:leunga@cs.nyu.edu">Allen Leung</A></ADDRESS>
<BR>

</BODY>
</HTML>
